<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.68a2c186e6950de96507c6d2df3bd13a5e800afcf0f1a7dd9c832045428c3e0bc8de1a115381005622d6129e466f6ac4457dd23f4f3a474b63acfdefa863f00b.css integrity="sha512-aKLBhuaVDellB8bS3zvROl6ACvzw8afdnIMgRUKMPgvI3hoRU4EAViLWEp5Gb2rERX3SP086R0tjrP3vqGPwCw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Investigating Performance Issues - Home</title><meta name=description content="Standard Operating Procedure (SOP) for Investigating Performance Issues in EC2 and RDS"><link rel=canonical href=/docs/others/investigating-performance-issues/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/bizkit.jpg"><meta name=twitter:title content="Investigating Performance Issues"><meta name=twitter:description content="Standard Operating Procedure (SOP) for Investigating Performance Issues in EC2 and RDS"><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta property="og:title" content="Investigating Performance Issues"><meta property="og:description" content="Standard Operating Procedure (SOP) for Investigating Performance Issues in EC2 and RDS"><meta property="og:type" content="article"><meta property="og:url" content="/docs/others/investigating-performance-issues/"><meta property="og:image" content="/bizkit.jpg"><meta property="article:published_time" content="2023-08-16T18:23:32+08:00"><meta property="article:modified_time" content="2023-08-16T18:23:32+08:00"><meta property="og:site_name" content="Home"><meta property="article:publisher" content="https://www.facebook.com/BizKitTechnologies"><meta property="article:author" content="https://www.facebook.com/BizKitTechnologies"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"\/docs\/others\/investigating-performance-issues\/"},"headline":"Investigating Performance Issues","image":[],"datePublished":"2023-08-16T18:23:32CET","dateModified":"2023-08-16T18:23:32CET","author":{"@type":"Organization","name":"Home"},"publisher":{"@type":"Organization","name":"Home","logo":{"@type":"ImageObject","url":"\/bizkit.png"}},"description":"Standard Operating Procedure (SOP) for Investigating Performance Issues in EC2 and RDS"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Docsothersinvestigating Performance Issues","item":"\/docsothersinvestigating-performance-issues\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=/>Home</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/BizKit-Tech/BizKit-Tech.github.io><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=/docs/start-here/introduction/>Docs</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#start-here aria-expanded=true>
Start Here</button><div class=collapse id=start-here><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded" href=/docs/start-here/introduction/>Introduction</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#training aria-expanded=false>
Training</button><div class=collapse id=training><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded" href=/docs/training/bench-commands/>Bench Commands</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#setup aria-expanded=false>
Setup</button><div class=collapse id=setup><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded" href=/docs/setup/set-up-instance/>Set Up an Instance</a></li><li><a class="link-dark rounded" href=/docs/setup/add-custom-domain/>Add Custom Domain</a></li><li><a class="link-dark rounded" href=/docs/setup/set-up-dns-multitenancy/>Set Up DNS Multitenancy</a></li><li><a class="link-dark rounded" href=/docs/setup/set-up-https/>Set Up HTTPS</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#projects aria-expanded=false>
Projects</button><div class=collapse id=projects><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded" href=/docs/projects/discounts/>Discounts</a></li><li><a class="link-dark rounded" href=/docs/projects/reports-configurations/>Reports Configurations</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#standards aria-expanded=false>
Standards</button><div class=collapse id=standards><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded" href=/docs/standards/code-review-guidelines/>Code Review Guidelines</a></li><li><a class="link-dark rounded" href=/docs/standards/coding-standards/>Coding Standards</a></li><li><a class="link-dark rounded" href=/docs/standards/commit-standards/>Commit Standards</a></li><li><a class="link-dark rounded" href=/docs/standards/tdd/>Test-Driven Development Guidelines</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#others aria-expanded=false>
Others</button><div class="collapse show" id=others><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded active" href=/docs/others/investigating-performance-issues/>Investigating Performance Issues</a></li><li><a class="link-dark rounded" href=/docs/others/logging-with-frappe/>Logging with Frappe</a></li><li><a class="link-dark rounded" href=/docs/others/performance-tuning-methods/>Performance Tuning Methods</a></li><li><a class="link-dark rounded" href=/docs/others/streamlining-server-deployment-with-github-actions/>Streamlining Server Deployment with Github Actions</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#help aria-expanded=false>
Help</button><div class=collapse id=help><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="link-dark rounded" href=/docs/help/commands/>Commands</a></li><li><a class="link-dark rounded" href=/docs/help/how-to-update/>How to Update</a></li><li><a class="link-dark rounded" href=/docs/help/troubleshooting/>Troubleshooting</a></li><li><a class="link-dark rounded" href=/docs/help/faq/>FAQ</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#procedure>Procedure</a><ul><li><a href=#a-initial-analysis>A. Initial Analysis</a></li><li><a href=#b-investigating-ec2-performance-issues>B. Investigating EC2 Performance Issues</a></li><li><a href=#c-investigating-rds-performance-issues>C. Investigating RDS Performance Issues</a></li><li><a href=#d-checking-application-code-for-optimization-areas>D. Checking Application Code for Optimization Areas</a></li><li><a href=#e-tuning-server-configuration>E. Tuning Server Configuration</a></li><li><a href=#f-implementing-changes-and-monitoring>F. Implementing Changes and Monitoring</a></li></ul></li><li><a href=#documentation>Documentation</a></li><li><a href=#specific-cases>Specific Cases</a><ul><li><a href=#case-1-storage-full>Case 1: Storage Full</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/others/>Others</a></li><li class="breadcrumb-item active" aria-current=page>Investigating Performance Issues</li></ol></nav><h1>Investigating Performance Issues</h1><p class=lead>The purpose of this Standard Operating Procedure (SOP) is to provide a structured approach for investigating and resolving performance issues in Amazon EC2 and Amazon RDS (Relational Database Service) instances.</p><h2 id=prerequisites>Prerequisites<a href=#prerequisites class=anchor aria-hidden=true>#</a></h2><ul><li>Access to the <a href="https://ap-southeast-1.console.aws.amazon.com/console/home?region=ap-southeast-1">AWS Management Console</a></li><li>SSH access to EC2 instances</li><li>Ubuntu (or a compatible Linux distribution) installed on the EC2 instances</li></ul><h2 id=procedure>Procedure<a href=#procedure class=anchor aria-hidden=true>#</a></h2><h3 id=a-initial-analysis>A. Initial Analysis<a href=#a-initial-analysis class=anchor aria-hidden=true>#</a></h3><ol><li>Identify the affected EC2 instance(s) or RDS database(s) experiencing performance issues.</li><li>Monitor user reports and system logs to gather information about the observed issues. Here are some questions that might aid in investigation:<ul><li>When did the site start slowing down?</li><li>What were some of the last activities in the site?</li><li>How many users were using the site?</li><li>Was there a recent deployment? What was it?</li><li>Have the users observed a pattern in the performance of the site?</li></ul></li><li>Identify the symptoms of the performance issues, such as slow response times, high CPU usage, database connection errors, slow query execution, or disk I/O bottlenecks by proceeding to the next steps.</li></ol><h3 id=b-investigating-ec2-performance-issues>B. Investigating EC2 Performance Issues<a href=#b-investigating-ec2-performance-issues class=anchor aria-hidden=true>#</a></h3><ol><li>SSH into the affected EC2 instance using an SSH client (e.g., PuTTY).</li><li>Run the <code>htop</code> command to analyze system resource utilization:<ul><li>Install <code>htop</code> if not already installed using the package manager (e.g., <code>sudo apt-get install htop</code>).</li><li>Launch <code>htop</code> by executing the command <code>htop</code>.</li><li>Observe CPU, memory, and disk usage, and identify any processes consuming excessive resources.</li><li>Take note of any processes or services causing high resource utilization.</li></ul></li></ol><h4 id=using-htop>Using htop<a href=#using-htop class=anchor aria-hidden=true>#</a></h4><h5 id=description>Description<a href=#description class=anchor aria-hidden=true>#</a></h5><p><code>htop</code> is an interactive process viewer and system monitor for Unix-like systems. It provides a user-friendly interface to monitor the system&rsquo;s resource usage, including CPU, memory, and network activity. <code>htop</code> displays information in real-time and allows users to manage and control processes efficiently.</p><figure class=border-0><img class="img-fluid lazyload blur-up" data-sizes=auto src=/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_20x0_resize_box_2.png data-srcset="/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_900x0_resize_box_2.png 900w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_800x0_resize_box_2.png 800w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_700x0_resize_box_2.png 700w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_600x0_resize_box_2.png 600w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_500x0_resize_box_2.png 500w" width=2674 height=1482 alt=htop><noscript><img class=img-fluid sizes=100vw srcset="/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_900x0_resize_box_2.png 900w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_800x0_resize_box_2.png 800w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_700x0_resize_box_2.png 700w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_600x0_resize_box_2.png 600w,/docs/others/investigating-performance-issues/htop_hudf7c0037a22dca316d467d3960f83a70_1864058_500x0_resize_box_2.png 500w" src=/docs/others/investigating-performance-issues/htop.png width=2674 height=1482 alt=htop></noscript></figure><h5 id=display>Display<a href=#display class=anchor aria-hidden=true>#</a></h5><p><code>htop</code> provides a comprehensive view of system resources. The default interface is divided into several sections:</p><ul><li>Header: Displays general system information, such as the load averages, uptime, and number of tasks running on the system.<ul><li>Load average: The average computational work performed by the CPU over the last 1, 5, and 15 minutes. A CPU with 1 core has a maximum load average of 1.00, while a CPU with 4 cores has a maximum load average of 4.00</li><li>Tasks: The total number of processes and threads running on the system</li><li>Uptime: The time since the system was last booted</li></ul></li><li>CPU Meters: Shows a visual representation of CPU usage for each core</li><li>Memory Meters: Displays memory usage, including total, used, and available memory</li><li>Swap Meters: Shows swap usage, including total, used, and free swap</li><li>Tasks: Lists running processes with details, including process ID (PID), user, CPU usage, memory usage, and more</li><li>Footer: Provides information on keybindings and system status</li></ul><h5 id=color-legend>Color Legend<a href=#color-legend class=anchor aria-hidden=true>#</a></h5><p><code>htop</code> uses color coding to highlight different types of processes and resource usage.</p><h6 id=for-cpu>For CPU<a href=#for-cpu class=anchor aria-hidden=true>#</a></h6><ul><li>Green: Normal (user) processes</li><li>Red: System processes</li><li>Yellow: I/O processes</li></ul><h6 id=for-memory>For Memory<a href=#for-memory class=anchor aria-hidden=true>#</a></h6><ul><li>Green: Running processes</li><li>Blue: Buffer pages</li><li>Yellow: Cache memory</li></ul><h5 id=process-information>Process Information<a href=#process-information class=anchor aria-hidden=true>#</a></h5><p><code>htop</code> displays detailed information about each process, including the process ID (PID), user, CPU usage, memory usage, and more.</p><ul><li>PID: The process ID</li><li>USER: The user who started the process</li><li>PRI: The process priority by the kernel</li><li>NI: The process nice value or priority reset by the user (higher values indicate lower priority)</li><li>VIRT: The total amount of virtual memory used by the process</li><li>RES: The total amount of physical memory used by the process</li><li>SHR: The total amount of shared memory used by the process</li><li>S: The process status<ul><li>R: Running</li><li>S: Sleeping (idle)</li><li>D: Disk sleep (uninterruptible)</li><li>Z: Zombie (waiting for parent to read its exit status)</li><li>T: Traced or suspended (e.g. by SIGTSTP)</li></ul></li><li>CPU%: The percentage of CPU time used by the process</li><li>MEM%: The percentage of memory used by the process</li><li>TIME+: The total CPU time used by the process</li><li>Command: The command used to start the process</li></ul><p>For more information, see the <a href=https://man7.org/linux/man-pages/man1/htop.1.html>Linux manual page</a> for <code>htop</code>.</p><h3 id=c-investigating-rds-performance-issues>C. Investigating RDS Performance Issues<a href=#c-investigating-rds-performance-issues class=anchor aria-hidden=true>#</a></h3><ol><li>Log in to the <a href=https://bizkit-tech.signin.aws.amazon.com/console>AWS Management Console</a> and navigate to the RDS dashboard.</li><li>Select the affected RDS database instance.</li><li>Review the monitoring graphs and logs provided by RDS, focusing on CPU utilization, IOPS, and database-specific metrics.</li></ol><h4 id=slow-query-log>Slow Query Log<a href=#slow-query-log class=anchor aria-hidden=true>#</a></h4><p>Monitor the slow query log to identify and analyze queries causing performance issues. A ready-made dashboard in CloudWatch is available for monitoring slow query logs.</p><ol><li>In the AWS Management Console, navigate to the CloudWatch dashboard.</li><li>Select <strong>Dashboards</strong> from the left navigation pane.</li><li>Select the <strong>slow-query-logs</strong> dashboard. This dashboard displays the slow query logs for all RDS instances with slow query logs enabled.</li></ol><p>If slow query log is not yet enabled, enable it by following these steps:</p><ol><li>In the RDS console, go to the <strong>Parameter groups</strong> tab for the RDS instance.</li><li>Create or modify the parameter group associated with the RDS instance.</li><li>Set the <code>slow_query_log</code> parameter to <code>1</code> to enable the slow query log.</li><li>Set the <code>log_output</code> parameter to <code>FILE</code> to write the slow query logs to the file system and publish them to CloudWatch logs.</li><li>Adjust the <code>long_query_time</code> parameter to specify the threshold for a query to be considered slow. The default value is 10 seconds.</li><li>Apply the modified parameter group to the RDS instance.</li><li>Add the instance&rsquo;s log file to the list of log files to be monitored in the <strong>slow-query-logs</strong> dashboard in CloudWatch.</li></ol><h4 id=real-time-monitoring>Real-time Monitoring<a href=#real-time-monitoring class=anchor aria-hidden=true>#</a></h4><h5 id=innodb-status>InnoDB Status<a href=#innodb-status class=anchor aria-hidden=true>#</a></h5><p>The MySQL InnoDB status provides a detailed report on the current state of the InnoDB storage engine. It can be used to identify the cause of performance issues, such as slow queries or deadlocks.</p><p>To show the InnoDB status, run the following command in the MySQL shell:</p><pre><code>SHOW ENGINE INNODB STATUS;
</code></pre><p>If you want to see the list of locked tables, run the following command in the MySQL shell:</p><pre><code>SHOW OPEN TABLES WHERE in_use &gt; 0;
</code></pre><h5 id=process-list>Process List<a href=#process-list class=anchor aria-hidden=true>#</a></h5><p>The MySQL process list contains information about the current running processes on the database server. It can be used to identify long-running queries or processes that are causing performance issues.</p><p>To show the process list, run the following command in the MySQL shell:</p><pre><code>SHOW FULL PROCESSLIST;
</code></pre><h3 id=d-checking-application-code-for-optimization-areas>D. Checking Application Code for Optimization Areas<a href=#d-checking-application-code-for-optimization-areas class=anchor aria-hidden=true>#</a></h3><p>Analyze the code for any performance bottlenecks and work with the development team to optimize those areas.</p><ul><li>Utilize the <strong>Network</strong> tab in the browser&rsquo;s developer tools to identify slow requests and analyze the code for potential optimization areas.</li><li>Use Frappe logs for debugging and identifying bottlenecks in the code. This is especially useful when running the application in production mode.</li><li>In developer mode, view real-time logs in the terminal window where <code>bench start</code> is running.<ul><li>When you write print statements in your Python code, the output will be displayed in the terminal window.</li></ul></li></ul><h4 id=network-tab>Network Tab<a href=#network-tab class=anchor aria-hidden=true>#</a></h4><p>The Network tab in a browser&rsquo;s developer tools allows you to monitor and analyze the network activity between the browser and the server, helping you identify bottlenecks, slow-loading resources, and other issues that might affect the overall performance of your web application.</p><figure class=border-0><img class="img-fluid lazyload blur-up" data-sizes=auto src=/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_20x0_resize_box_2.png data-srcset="/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_900x0_resize_box_2.png 900w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_800x0_resize_box_2.png 800w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_700x0_resize_box_2.png 700w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_600x0_resize_box_2.png 600w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_500x0_resize_box_2.png 500w" width=2016 height=1790 alt="Network Tab"><noscript><img class=img-fluid sizes=100vw srcset="/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_900x0_resize_box_2.png 900w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_800x0_resize_box_2.png 800w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_700x0_resize_box_2.png 700w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_600x0_resize_box_2.png 600w,/docs/others/investigating-performance-issues/network-tab_hu596b79a4c1ffabd2d4c7118409d49518_642768_500x0_resize_box_2.png 500w" src=/docs/others/investigating-performance-issues/network-tab.png width=2016 height=1790 alt="Network Tab"></noscript></figure><h5 id=how-to-use-the-network-tab>How to use the Network tab<a href=#how-to-use-the-network-tab class=anchor aria-hidden=true>#</a></h5><ol><li>Open the browser&rsquo;s developer tools by right-clicking on your web page and selecting <strong>Inspect</strong> or <strong>Inspect Element.</strong> Alternatively, you can use keyboard shortcuts like F12 or Ctrl+Shift+I (Windows/Linux) or Cmd+Option+I (Mac) to open the Developer Tools panel.</li><li>Within the Developer Tools panel, find and select the <strong>Network</strong> tab. This tab displays a timeline of all network requests made by the web page.</li><li>Reload the page. This will capture all the network requests made during the page load.</li><li>As the page loads, you&rsquo;ll see various network requests being recorded in the Network tab. The timeline displays details such as the request type (e.g., GET, POST), the resource&rsquo;s URL, status codes, and timing information.</li><li>Analyze the requests and responses to identify slow requests and potential optimization areas. Look for the following details:<ul><li>Response Time: Check the <strong>Time</strong> column to see how long each request takes to complete. Slow responses might indicate issues with the server or network.</li><li>Status Codes: Check the <strong>Status</strong> column to identify any failed requests (e.g., 404 or 500 errors).</li><li>Size: Analyze the <strong>Size</strong> column to see the size of the resources being loaded. Large resources can slow down page loading.</li><li>Waterfall Chart: The waterfall chart provides a visual representation of when requests start and finish relative to each other. This can help you identify dependencies and bottlenecks.</li></ul></li><li>Use filters and sorting options to focus on specific types of requests (e.g., XHR, images, scripts) or to sort requests by different criteria (e.g., response time, size). This can help you isolate specific types of performance issues.</li></ol><h4 id=frappe-logs>Frappe Logs<a href=#frappe-logs class=anchor aria-hidden=true>#</a></h4><p>Frappe logs can include information about errors and exceptions that have occurred, as well as various types of debugging and diagnostic information.</p><p><em>See <a href=/docs/others/logging-with-frappe>Logging with Frappe</a> for details on how to use Frappe&rsquo;s built-in logging system.</em></p><h5 id=desk-logs>Desk Logs<a href=#desk-logs class=anchor aria-hidden=true>#</a></h5><p>Logs that track operational events: usually user activities that happen in the frontend. They can be accessed via the Desk UI.</p><ul><li>Access Log</li><li>Activity Log</li><li>Error Log</li><li>Scheduled Job Log</li></ul><h5 id=server-logs>Server Logs<a href=#server-logs class=anchor aria-hidden=true>#</a></h5><p>Logs that are generated by the Frappe application on the server level. They generally consist of lower level, transactional data. From your frappe-bench folder, you may find logs under:</p><ul><li><code>./logs</code></li><li><code>./sites/{site}/logs</code></li></ul><p>Here are the types of server logs:</p><ul><li><code>bench.log</code></li><li><code>scheduler.log</code></li><li><code>worker.log</code></li><li><code>worker.error.log</code></li><li><code>frappe.log</code></li><li><code>backup.log</code></li></ul><h4 id=when-should-you-check-the-application-code>When should you check the application code?<a href=#when-should-you-check-the-application-code class=anchor aria-hidden=true>#</a></h4><h5 id=high-resource-utilization>High resource utilization<a href=#high-resource-utilization class=anchor aria-hidden=true>#</a></h5><p>If the initial analysis or monitoring indicates high resource utilization on the application server (EC2 instance), it is worth investigating the application code for any resource-intensive processes, memory leaks, or inefficient algorithms. Optimizing the code can reduce the strain on system resources and improve overall performance.</p><h5 id=database-centric-performance-issues>Database-centric performance issues<a href=#database-centric-performance-issues class=anchor aria-hidden=true>#</a></h5><p>If the performance problems are primarily related to database operations, such as slow queries or inefficient data retrieval, reviewing and optimizing the application code can have a significant impact. Analyzing the code can help identify areas where queries can be optimized, data fetching can be optimized, or caching mechanisms can be implemented.</p><h5 id=recurring-performance-issues>Recurring performance issues<a href=#recurring-performance-issues class=anchor aria-hidden=true>#</a></h5><p>If you frequently encounter performance issues that appear to be related to the application logic, it is important to dig deeper into the code. Reviewing the code for potential optimization areas can help identify recurring patterns or bottlenecks that may need to be addressed systematically.</p><h3 id=e-tuning-server-configuration>E. Tuning Server Configuration<a href=#e-tuning-server-configuration class=anchor aria-hidden=true>#</a></h3><p>It is recommended to do this in urgent situations or when other investigations have identified database or server misconfigurations.</p><ol><li>Adjust RDS parameter groups for the affected database instance(s).</li><li>Modify EC2 instance configurations if necessary (e.g., changing instance type, increasing storage).</li><li>Optimize query execution plans or indexing strategies for the database.</li><li>Adjust RDS or EC2 instance scaling settings if applicable.</li></ol><p>More details can be found in the <a href=/docs/others/performance-tuning-methods>Performance Tuning Methods</a> document.</p><h3 id=f-implementing-changes-and-monitoring>F. Implementing Changes and Monitoring<a href=#f-implementing-changes-and-monitoring class=anchor aria-hidden=true>#</a></h3><ol><li>Monitor the system after making changes to assess the impact on performance.</li><li>Utilize AWS CloudWatch or third-party monitoring tools to track relevant metrics and gather real-time insights.</li><li>Continue monitoring and refining configurations until the desired performance improvements are achieved.</li></ol><h2 id=documentation>Documentation<a href=#documentation class=anchor aria-hidden=true>#</a></h2><ol><li>Maintain a log of all investigations performed, including the observed symptoms, analysis conducted, and actions taken.</li><li>Document any changes made to database configurations, instance settings, or other relevant adjustments.</li><li>Record the results of the changes and the impact on performance.</li></ol><hr><h2 id=specific-cases>Specific Cases<a href=#specific-cases class=anchor aria-hidden=true>#</a></h2><h3 id=case-1-storage-full>Case 1: Storage Full<a href=#case-1-storage-full class=anchor aria-hidden=true>#</a></h3><p>Run <code>df -H</code> to check the storage usage of the EC2 instance. If a filesystem (e.g. <code>/dev/sda1</code>) is full:</p><ol type=1><li>Run <code>du -h -x -d1 /</code> to find out which specific directory takes up space.</li><li>If <code>/tmp</code> is taking up space, check inside if there are large <code>#sql_*****.MAD</code> files.<ol type=a><li>If there are: there might be a long-running, dead query. To resolve this, follow these steps:<ol type=i><li>In <code>mysql</code>, run <code>show processlist</code> to identify the query (check the Time column).</li><li>Once the query is identified, kill the query using <code>kill [query_id]</code>. Check if the <code>.MAD</code> files are deleted.</li><li>Run <code>sudo service mysqld restart</code> to restart MySQL server.</li></ol></li><li>If there is none: try to explore and identify which files are taking up too much space. Delete them if possible.</li></ol><li>Consider running the following commands to clear up MySQL cache in case nothing else works out. This will delete all binary logs and reset the index file. This is safe to do as long as you don't need to restore from a backup.</li></ol><pre><code class=language-bash>cd /var/lib/mysql
sudo su
ls | grep -P &quot;^mysql-bin.[0-9]+$&quot; | xargs -d&quot;\n&quot; rm
rm /var/log/mysql/mariadb-bin.index
</code></pre><div class=my-n3></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://github.com/>GitHub</a>, <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.2374eee79bc19379a4404a900e042aef91675978a6686beeb97b3b0fa80af5c349abc1304de36298d942cde796148b853299ff49801257ee2b89e89ac427d75b.js integrity="sha512-I3Tu55vBk3mkQEqQDgQq75FnWXimaGvuuXs7D6gK9cNJq8EwTeNimNlCzeeWFIuFMpn/SYASV+4rieiaxCfXWw==" crossorigin=anonymous defer></script><script src=/js/highlight.min.06bc575474b7870a192cb49dce8845ac4471f5e504357081665555fe252a37837b72cca0f58157a9615ff384d3e439e26f58c94416a4b744c27b3056adfad1aa.js integrity="sha512-BrxXVHS3hwoZLLSdzohFrERx9eUENXCBZlVV/iUqN4N7csyg9YFXqWFf84TT5Dnib1jJRBakt0TCezBWrfrRqg==" crossorigin=anonymous defer></script><script src=/main.min.7ab523108435955765bcb88a0ee704f412ba01646b5478e84f3b9feb24f0ce750a14c3f7bd9a62408fe21e41996d361a9eb29f77e85dfe77b7e17f7623bd3a97.js integrity="sha512-erUjEIQ1lVdlvLiKDucE9BK6AWRrVHjoTzuf6yTwznUKFMP3vZpiQI/iHkGZbTYanrKfd+hd/ne34X92I706lw==" crossorigin=anonymous defer></script><script src=/index.min.b711c152caef6082b7eb0e649acf8cd0917a64ff87995247170caa6cb86ece1f573c54d90046c1f52f30733f75ce4119a98f80518da7bffb0d41ebfb1598e384.js integrity="sha512-txHBUsrvYIK36w5kms+M0JF6ZP+HmVJHFwyqbLhuzh9XPFTZAEbB9S8wcz91zkEZqY+AUY2nv/sNQev7FZjjhA==" crossorigin=anonymous defer></script></body></html>